<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flipbook - Kerala Kala Kendram</title>
<style>
    body {
        background: #f4f4f4;
        margin: 0;
        padding: 0;
        font-family: sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }
    #flipbook {
        width: 90%;
        height: 90vh;
    }
    canvas {
        max-width: 100%;
        height: auto;
        display: block;
        margin: auto;
    }
</style>
<!-- jQuery & Turn.js -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/4.1.0/turn.min.js"></script>
<!-- PDF.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.12.313/pdf.min.js"></script>
</head>
<body>

<div id="flipbook"></div>

<script>
const totalPages = 48; // ðŸ”¹ Change to your actual number of pages
const pdfFolder = "pdf/";

function renderPDFtoCanvas(pdfUrl) {
    return pdfjsLib.getDocument(pdfUrl).promise.then(pdf => {
        return pdf.getPage(1).then(page => {
            const viewport = page.getViewport({ scale: 2 });
            const canvas = document.createElement("canvas");
            const context = canvas.getContext("2d");
            canvas.width = viewport.width;
            canvas.height = viewport.height;
            return page.render({ canvasContext: context, viewport: viewport }).promise.then(() => canvas);
        });
    });
}

async function loadFlipbook() {
    const pages = [];
    for (let i = 1; i <= totalPages; i++) {
        const pagePath = `${pdfFolder}p${i}.pdf`;
        const canvas = await renderPDFtoCanvas(pagePath);
        const pageDiv = document.createElement("div");
        pageDiv.appendChild(canvas);
        pages.push(pageDiv);
    }

    $("#flipbook").html(pages);
    $("#flipbook").turn({
        width: "100%",
        height: "100%",
        autoCenter: true,
        responsive: true
    });
}

pdfjsLib.GlobalWorkerOptions.workerSrc = "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.12.313/pdf.worker.min.js";
loadFlipbook();
</script>

</body>
</html>
